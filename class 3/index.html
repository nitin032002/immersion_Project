<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Search</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    input, button, select {
      padding: 10px;
      margin-right: 10px;
      font-size: 16px;
    }
    .product {
      background: white;
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .product img {
      width: 100px;
    }
  </style>
</head>
<body>
  <h1>Product Search</h1>
  <br>
  <input type="text" id="searchInput" placeholder="Search for products..." />
  <button onclick="searchProducts()">Search</button>

  <select id="sortSelect" onchange="applySort()">
    <option value="">-- Sort By --</option>
    <option value="price-asc">Price: Low to High</option>
    <option value="price-desc">Price: High to Low</option>
    <option value="rating-asc">Rating: Low to High</option>
    <option value="rating-desc">Rating: High to Low</option>
  </select>

  <div id="productsList"></div>

  <script>
    let currentProducts = [];

    function searchProducts() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) {
        alert("Search field cannot be empty.");
        return;
      }
      window.onload = function () {
  fetch('https://dummyjson.com/products')
    .then(res => res.json())
    .then(data => {
      currentProducts = data.products;
      displayProducts(currentProducts);
    });
};---


      fetch(`https://dummyjson.com/products/search?q=${query}`)
        .then(res => res.json())
        .then(data => {
          currentProducts = data.products;
          displayProducts(currentProducts);
        })
        .catch(err => console.error(err));
    }

    function displayProducts(products) {
      const container = document.getElementById('productsList');
      container.innerHTML = '';

      if (products.length === 0) {
        container.innerHTML = '<p>No products found.</p>';
        return;
      }

      products.forEach(product => {
        container.innerHTML += `
          <div class="product">
            <img src="${product.thumbnail}" alt="${product.title}" />
            <div>
              <h3>${product.title}</h3>
              <p>Price: $${product.price}</p>
              <p>Rating: ${product.rating}</p>
            </div>
          </div>
        `;
      });
    }

    function applySort() {
      const sortValue = document.getElementById('sortSelect').value;
      let sortedProducts = [...currentProducts];

      switch (sortValue) {
        case "price-asc":
          sortedProducts.sort((a, b) => a.price - b.price);
          break;
        case "price-desc":
          sortedProducts.sort((a, b) => b.price - a.price);
          break;
        case "rating-asc":
          sortedProducts.sort((a, b) => a.rating - b.rating);
          break;
        case "rating-desc":
          sortedProducts.sort((a, b) => b.rating - a.rating);
          break;
      }

      displayProducts(sortedProducts);
    }
  </script>
</body>
</html>
